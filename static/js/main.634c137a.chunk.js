(this["webpackJsonpreact_todo-app"]=this["webpackJsonpreact_todo-app"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,c){},,function(e,t,c){},,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var o=c(10),n=c.n(o),a=c(6),s=(c(15),c(5)),l=c(7),r=c(2),i=c(4),d=c.n(i),u=c(0),p=c(3),j=c.n(p),b=(c(17),c(1)),f=function(e){var t=e.todo,c=e.deleteTodo,o=e.changeStatus,n=e.changeTitle,a=Object(u.useState)(!1),s=Object(r.a)(a,2),l=s[0],i=s[1],d=Object(u.useState)(t.title),p=Object(r.a)(d,2),f=p[0],m=p[1],h=function(){0===f.length?(c(t.id),i(!1)):(n(t.id,f),i(!1))};return Object(b.jsxs)("li",{className:j()("TodoItem + ".concat(t.completed?"TodoItem--completed":"")),onDoubleClick:function(){return i(!0)},children:[Object(b.jsx)("input",{type:"checkbox",className:"TodoItem__toggle",id:"toggle-view",onChange:function(){o(t.id)}}),Object(b.jsx)("label",{htmlFor:"toggle-view",className:j()("TodoItem__label + ".concat(t.completed?"TodoItem__label--completed":"")),children:t.title}),Object(b.jsx)("button",{type:"button",className:"TodoItem__destroy","data-cy":"deleteTodo",onClick:function(){return c(t.id)}}),Object(b.jsx)("input",{type:"text",className:l?"TodoItem__edit--active input":"TodoItem__edit input",value:f,onChange:function(e){m(e.target.value)},onBlur:function(){h()},onKeyDown:function(e){var c=e.nativeEvent.key;"Enter"===c?h():"Escape"===c&&(m(t.title),i(!1))}})]})},m=(c(19),function(e){var t=e.items,c=e.deleteTodo,o=e.changeStatus,n=e.changeTitle;return Object(b.jsx)("ul",{className:"TodoList",children:t.map((function(e){return Object(b.jsx)(f,{todo:e,deleteTodo:c,changeStatus:o,changeTitle:n},e.id)}))})}),h=(c(20),function(e){var t=e.showTodos,c=Object(u.useState)("all"),o=Object(r.a)(c,2),n=o[0],s=o[1];return Object(b.jsxs)("ul",{className:"TodosFilter",children:[Object(b.jsx)("li",{className:"TodosFilter__items",children:Object(b.jsx)(a.b,{className:j()("TodosFilter__link + ".concat("all"===n?"TodosFilter__link--selected":"")),to:"/all",onClick:function(){t("all"),s("all")},children:"All"})}),Object(b.jsx)("li",{className:"TodosFilter__items",children:Object(b.jsx)(a.b,{className:j()("TodosFilter__link + ".concat("active"===n?"TodosFilter__link--selected":"")),to:"/active",onClick:function(){t("active"),s("active")},children:"Active"})}),Object(b.jsx)("li",{className:"TodosFilter__items",children:Object(b.jsx)(a.b,{className:j()("TodosFilter__link + ".concat("completed"===n?"TodosFilter__link--selected":"")),to:"/completed",onClick:function(){t("completed"),s("completed")},children:"Completed"})})]})}),O="https://mate.academy/students-api",_=function(e,t){return fetch("".concat(O).concat(e),t).then((function(e){if(!e.ok)throw new Error("".concat(e.status," ").concat(e.statusText));return e.json()}))},T=4063,x="https://mate.academy/students-api/todos",g=function(){var e="".concat(O,"/todos?userId=").concat(T);return fetch(e).then((function(e){return e.json()}))},v=function(){var e=Object(l.a)(d.a.mark((function e(t){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(x,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t,userId:T,completed:!1})});case 2:return c=e.sent,e.abrupt("return",c.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e){fetch("".concat(x,"/").concat(e),{method:"DELETE"})},y=function(e,t){return _(e,{method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)})},k=(c(21),function(){var e=Object(u.useState)(""),t=Object(r.a)(e,2),c=t[0],o=t[1],n=Object(u.useState)([]),a=Object(r.a)(n,2),i=a[0],p=a[1],f=Object(u.useState)(""),O=Object(r.a)(f,2),x=O[0],k=O[1],S=function(){var e=Object(l.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_("/users/".concat(T));case 2:(t=e.sent).error?k("Failed to fecth User Info"):o(t.name);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g().then(p);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=Object(u.useState)(""),C=Object(r.a)(w,2),F=C[0],I=C[1],E=function(e){N(e),p(i.filter((function(t){return t.id!==e})))},D=Object(u.useState)([]),J=Object(r.a)(D,2),B=J[0],L=J[1],P=Object(u.useState)([]),U=Object(r.a)(P,2),H=U[0],K=U[1],M=Object(u.useState)(!1),W=Object(r.a)(M,2),q=W[0],z=W[1],G=Object(u.useState)(i),Q=Object(r.a)(G,2),R=Q[0],V=Q[1];return Object(u.useEffect)((function(){S(),A()}),[]),Object(u.useEffect)((function(){var e=i.filter((function(e){return!e.completed})),t=i.filter((function(e){return e.completed}));A(),L(e),K(t),V(i)}),[i]),Object(b.jsxs)("section",{className:"TodoApp",children:[Object(b.jsxs)("header",{className:"TodoApp__header",children:[Object(b.jsxs)("h1",{className:"TodoApp__title",children:["todos of"," ",c]}),Object(b.jsx)("form",{onSubmit:function(e){e.preventDefault(),v(F),I("")},children:Object(b.jsx)("input",{type:"text",className:"TodoApp__new-todo input",placeholder:"What needs to be done?","data-cy":"createTodo",value:F,onChange:function(e){return I(e.target.value)}})})]}),Object(b.jsxs)("section",{className:"TodoApp__main",children:[x&&Object(b.jsx)("p",{className:"TodoApp__error",children:x}),Object(b.jsx)("input",{type:"checkbox",id:"toggle-all",className:"TodoApp__toggle-all","data-cy":"toggleAll",onChange:function(){!function(){var e=i.map((function(e){return q?(y("/todos/".concat(e.id),{completed:!1}),Object(s.a)(Object(s.a)({},e),{},{completed:!1})):(y("/todos/".concat(e.id),{completed:!0}),Object(s.a)(Object(s.a)({},e),{},{completed:!0}))}));p(e),z(!q)}()}}),Object(b.jsx)("label",{htmlFor:"toggle-all",className:j()("TodoApp__toggleAll-label + ".concat(q?"TodoApp__toggleAll-label--completed":"")),children:"Mark all as complete"}),Object(b.jsx)(m,{items:R,deleteTodo:E,changeStatus:function(e){p(i.map((function(t){if(t.id===e){var c={completed:!t.completed};return y("/todos/".concat(e),c),Object(s.a)(Object(s.a)({},t),{},{completed:!t.completed})}return Object(s.a)({},t)})))},changeTitle:function(e,t){var c={title:t};t||N(e),y("/todos/".concat(e),c),A()}})]}),i.length>0&&Object(b.jsxs)("footer",{className:"TodoApp__footer",children:[Object(b.jsx)("span",{className:"TodoApp__todo-count","data-cy":"todosCounter",children:1===B.length?"1 item left":"".concat(B.length," items left")}),Object(b.jsx)(h,{showTodos:function(e){switch(e){case"all":V(i);break;case"active":V(B);break;case"completed":V(H)}}}),H.length>0&&Object(b.jsx)("button",{type:"button",className:"TodoApp__clear-completed",onClick:function(){return i.forEach((function(e){e.completed&&E(e.id)})),p(i.filter((function(e){return!e.completed}))),void z(!1)},children:"Clear completed"})]})]})}),S=function(){return Object(b.jsx)(k,{})};n.a.render(Object(b.jsx)(a.a,{children:Object(b.jsx)(S,{})}),document.getElementById("root"))}],[[22,1,2]]]);
//# sourceMappingURL=main.634c137a.chunk.js.map