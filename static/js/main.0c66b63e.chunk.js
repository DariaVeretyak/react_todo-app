(this["webpackJsonpreact_todo-app"]=this["webpackJsonpreact_todo-app"]||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,c){},,function(e,t,c){},,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var o=c(10),n=c.n(o),a=c(5),l=(c(15),c(6)),s=c(7),i=c(2),r=c(4),d=c.n(r),u=c(0),p=c(3),j=c.n(p),m=(c(17),c(1)),f=function(e){var t=e.todo,c=e.deleteTodo,o=e.changeStatus,n=e.changeTitle,a=Object(u.useState)(!1),l=Object(i.a)(a,2),s=l[0],r=l[1],d=Object(u.useState)(t.title),p=Object(i.a)(d,2),f=p[0],b=p[1],h=function(){0===f.length?(c(t.id),r(!1)):(n(t.id,f),r(!1))};return Object(m.jsxs)("div",{className:j()("TodoItem + ".concat(t.completed?"TodoItem--completed":"")),children:[Object(m.jsx)("button",{className:j()("TodoItem__label",{"TodoItem__label--completed":t.completed}),type:"button",onClick:function(){o(t.id)},onKeyDown:function(){o(t.id)},children:Object(m.jsx)("input",{type:"checkbox",className:"TodoItem__toggle",id:"toggle-view"})}),Object(m.jsx)("span",{className:j()("TodoItem__text",{"TodoItem__text--completed":t.completed}),onDoubleClick:function(){return r(!0)},children:t.title}),Object(m.jsx)("button",{type:"button",className:"TodoItem__destroy","data-cy":"deleteTodo",onClick:function(){return c(t.id)}}),Object(m.jsx)("input",{type:"text",className:s?"TodoItem__edit--active input":"TodoItem__edit input",value:f,onChange:function(e){b(e.target.value)},onBlur:function(){h()},onKeyDown:function(e){var c=e.nativeEvent.key;"Enter"===c?h():"Escape"===c&&(b(t.title),r(!1))}})]})},b=(c(19),function(e){var t=e.items,c=e.deleteTodo,o=e.changeStatus,n=e.changeTitle;return Object(m.jsx)("ul",{className:"TodoList",children:t.map((function(e){return Object(m.jsx)("li",{children:Object(m.jsx)(f,{todo:e,deleteTodo:c,changeStatus:o,changeTitle:n})},e.id)}))})}),h=(c(20),function(e){var t=e.showTodos,c=Object(u.useState)("all"),o=Object(i.a)(c,2),n=o[0],l=o[1];return Object(m.jsxs)("ul",{className:"TodosFilter",children:[Object(m.jsx)("li",{className:"TodosFilter__items",children:Object(m.jsx)(a.b,{className:j()("TodosFilter__link",{"TodosFilter__link--selected":"all"===n}),to:"/all",onClick:function(){t("all"),l("all")},children:"All"})}),Object(m.jsx)("li",{className:"TodosFilter__items",children:Object(m.jsx)(a.b,{className:j()("TodosFilter__link",{"TodosFilter__link--selected":"active"===n}),to:"/active",onClick:function(){t("active"),l("active")},children:"Active"})}),Object(m.jsx)("li",{className:"TodosFilter__items",children:Object(m.jsx)(a.b,{className:j()("TodosFilter__link",{"TodosFilter__link--selected":"completed"===n}),to:"/completed",onClick:function(){t("completed"),l("completed")},children:"Completed"})})]})}),O="https://mate.academy/students-api/todos",_="".concat(O,"?userId=").concat(4063),T=function(){var e=Object(s.a)(d.a.mark((function e(t){var c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(O,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t,completed:!1,userId:4063})});case 2:return c=e.sent,e.abrupt("return",c.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e){fetch("".concat(O,"/").concat(e),{method:"DELETE"})},g=function(e,t){return function(e,t){return fetch("".concat("https://mate.academy/students-api").concat(e),t).then((function(e){if(!e.ok)throw new Error("".concat(e.status," ").concat(e.statusText));return e.json()}))}(e,{method:"PATCH",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(t)})},v=(c(21),function(){var e=Object(u.useState)([]),t=Object(i.a)(e,2),c=t[0],o=t[1],n=function(){var e=Object(s.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch(_).then((function(e){return e.json()})).then(o);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=Object(u.useState)(""),r=Object(i.a)(a,2),p=r[0],f=r[1],O=function(e){x(e),o(c.filter((function(t){return t.id!==e})))},v=Object(u.useMemo)((function(){return c.reduce((function(e,t){return t.completed?e:e+1}),0)}),[c]),y=Object(u.useMemo)((function(){return c.reduce((function(e,t){return t.completed?e+1:e}),0)}),[c]),N=Object(u.useState)(!1),k=Object(i.a)(N,2),A=k[0],C=k[1],w=Object(u.useState)(c),S=Object(i.a)(w,2),I=S[0],E=S[1];return Object(u.useEffect)((function(){n()}),[]),Object(u.useEffect)((function(){E(c)}),[c]),Object(m.jsxs)("section",{className:"TodoApp",children:[Object(m.jsxs)("header",{className:"TodoApp__header",children:[Object(m.jsx)("h1",{className:"TodoApp__title",children:"todos"}),Object(m.jsx)("form",{onSubmit:function(e){e.preventDefault(),T(p).then(n),f("")},children:Object(m.jsx)("input",{type:"text",className:"TodoApp__new-todo input",placeholder:"What needs to be done?","data-cy":"createTodo",value:p,onChange:function(e){return f(e.target.value)}})})]}),Object(m.jsxs)("section",{className:"TodoApp__main",children:[Object(m.jsx)("input",{type:"checkbox",id:"toggle-all",className:"TodoApp__toggle-all","data-cy":"toggleAll",onChange:function(){!function(){var e=c.map((function(e){return A?(g("/todos/".concat(e.id),{completed:!1}),Object(l.a)(Object(l.a)({},e),{},{completed:!1})):(g("/todos/".concat(e.id),{completed:!0}),Object(l.a)(Object(l.a)({},e),{},{completed:!0}))}));o(e),C(!A)}()}}),Object(m.jsx)("label",{htmlFor:"toggle-all",className:j()("TodoApp__toggleAll-label",{"TodoApp__toggleAll-label--completed":A}),children:"Mark all as complete"}),Object(m.jsx)(b,{items:I,deleteTodo:O,changeStatus:function(e){c.forEach((function(t){if(t.id===e){var c={completed:!t.completed};g("/todos/".concat(e),c).then(n)}}))},changeTitle:function(e,t){var c={title:t};t||x(e),g("/todos/".concat(e),c).then(n)}})]}),c.length>0&&Object(m.jsxs)("footer",{className:"TodoApp__footer",children:[Object(m.jsx)("span",{className:"TodoApp__todo-count","data-cy":"todosCounter",children:1===v?"1 item left":"".concat(v," items left")}),Object(m.jsx)(h,{showTodos:function(e){switch(e){case"all":E(c);break;case"active":E(c.filter((function(e){return!e.completed})));break;case"completed":E(c.filter((function(e){return e.completed})))}}}),y>0&&Object(m.jsx)("button",{type:"button",className:"TodoApp__clear-completed",onClick:function(){return c.forEach((function(e){e.completed&&O(e.id)})),o(c.filter((function(e){return!e.completed}))),void C(!1)},children:"Clear completed"})]})]})}),y=function(){return Object(m.jsx)(v,{})};n.a.render(Object(m.jsx)(a.a,{children:Object(m.jsx)(y,{})}),document.getElementById("root"))}],[[22,1,2]]]);
//# sourceMappingURL=main.0c66b63e.chunk.js.map